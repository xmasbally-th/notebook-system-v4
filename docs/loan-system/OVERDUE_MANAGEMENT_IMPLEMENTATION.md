# ‡∏Å‡∏≤‡∏£‡∏õ‡∏£‡∏±‡∏ö‡∏õ‡∏£‡∏∏‡∏á‡∏£‡∏∞‡∏ö‡∏ö‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏Ñ‡∏≥‡∏Ç‡∏≠‡∏ó‡∏µ‡πà‡∏´‡∏°‡∏î‡∏≠‡∏≤‡∏¢‡∏∏

**‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà:** ${new Date().toLocaleDateString('th-TH')}

## ‡∏™‡∏£‡∏∏‡∏õ‡∏Å‡∏≤‡∏£‡∏õ‡∏£‡∏±‡∏ö‡∏õ‡∏£‡∏∏‡∏á

‡∏£‡∏∞‡∏ö‡∏ö‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏Ñ‡∏≥‡∏Ç‡∏≠‡∏ó‡∏µ‡πà‡∏´‡∏°‡∏î‡∏≠‡∏≤‡∏¢‡∏∏‡πÑ‡∏î‡πâ‡∏£‡∏±‡∏ö‡∏Å‡∏≤‡∏£‡∏û‡∏±‡∏í‡∏ô‡∏≤‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏õ‡∏±‡∏ç‡∏´‡∏≤‡∏ó‡∏µ‡πà‡∏£‡∏∞‡∏ö‡∏∏‡πÉ‡∏ô LOAN_SYSTEM_AUDIT_REPORT.md ‡∏´‡∏±‡∏ß‡∏Ç‡πâ‡∏≠ "‡∏Å‡∏≤‡∏£‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏Ñ‡∏≥‡∏Ç‡∏≠‡∏ó‡∏µ‡πà‡∏´‡∏°‡∏î‡∏≠‡∏≤‡∏¢‡∏∏"

---

## üéØ ‡∏ß‡∏±‡∏ï‡∏ñ‡∏∏‡∏õ‡∏£‡∏∞‡∏™‡∏á‡∏Ñ‡πå

1. ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡πÅ‡∏•‡∏∞‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡∏Ñ‡∏≥‡∏Ç‡∏≠‡∏¢‡∏∑‡∏°‡∏ó‡∏µ‡πà‡πÄ‡∏Å‡∏¥‡∏ô‡∏Å‡∏≥‡∏´‡∏ô‡∏î‡∏Ñ‡∏∑‡∏ô‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥
2. ‡∏™‡πà‡∏á‡∏Å‡∏≤‡∏£‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô‡πÑ‡∏õ‡∏¢‡∏±‡∏á‡∏ú‡∏π‡πâ‡∏¢‡∏∑‡∏°‡πÅ‡∏•‡∏∞‡∏ú‡∏π‡πâ‡∏î‡∏π‡πÅ‡∏•‡∏£‡∏∞‡∏ö‡∏ö
3. ‡πÅ‡∏™‡∏î‡∏á‡∏™‡∏ñ‡∏¥‡∏ï‡∏¥‡πÅ‡∏•‡∏∞‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏Ñ‡∏≥‡∏Ç‡∏≠‡∏ó‡∏µ‡πà‡πÄ‡∏Å‡∏¥‡∏ô‡∏Å‡∏≥‡∏´‡∏ô‡∏î
4. ‡∏™‡πà‡∏á‡∏Å‡∏≤‡∏£‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô‡∏•‡πà‡∏ß‡∏á‡∏´‡∏ô‡πâ‡∏≤‡∏Å‡πà‡∏≠‡∏ô‡∏Ñ‡∏£‡∏ö‡∏Å‡∏≥‡∏´‡∏ô‡∏î‡∏Ñ‡∏∑‡∏ô
5. ‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏Å‡∏≤‡∏£‡∏à‡∏≠‡∏á‡∏ó‡∏µ‡πà‡∏´‡∏°‡∏î‡∏≠‡∏≤‡∏¢‡∏∏‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥

---

## üì¶ ‡πÑ‡∏ü‡∏•‡πå‡∏ó‡∏µ‡πà‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÉ‡∏´‡∏°‡πà

### 1. Cloud Functions

#### `functions/checkOverdueLoans.js`
Cloud Functions ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡πÅ‡∏•‡∏∞‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏Ñ‡∏≥‡∏Ç‡∏≠‡∏ó‡∏µ‡πà‡∏´‡∏°‡∏î‡∏≠‡∏≤‡∏¢‡∏∏

**‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏´‡∏•‡∏±‡∏Å:**

##### 1.1 `checkOverdueLoans`
- **Schedule:** ‡∏ó‡∏∏‡∏Å 1 ‡∏ä‡∏±‡πà‡∏ß‡πÇ‡∏°‡∏á
- **‡∏´‡∏ô‡πâ‡∏≤‡∏ó‡∏µ‡πà:**
  - ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏Ñ‡∏≥‡∏Ç‡∏≠‡∏¢‡∏∑‡∏°‡∏ó‡∏µ‡πà‡πÄ‡∏Å‡∏¥‡∏ô‡∏Å‡∏≥‡∏´‡∏ô‡∏î‡∏Ñ‡∏∑‡∏ô (status = 'borrowed' ‡πÅ‡∏•‡∏∞ expectedReturnDate < now)
  - ‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡πÄ‡∏õ‡πá‡∏ô 'overdue'
  - ‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏Å‡∏≤‡∏£‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô‡πÑ‡∏õ‡∏¢‡∏±‡∏á‡∏ú‡∏π‡πâ‡∏¢‡∏∑‡∏° (priority: high)
  - ‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏Å‡∏≤‡∏£‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô‡πÑ‡∏õ‡∏¢‡∏±‡∏á admin ‡∏ó‡∏∏‡∏Å‡∏Ñ‡∏ô (priority: medium)
  - ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å activity log
- **‡∏ú‡∏•‡∏•‡∏±‡∏û‡∏ò‡πå:**
  ```javascript
  {
    success: true,
    overdueCount: 5,
    notificationsSent: 15,
    timestamp: "2024-01-15T10:00:00.000Z"
  }
  ```

##### 1.2 `sendLoanReminders`
- **Schedule:** ‡∏ó‡∏∏‡∏Å‡∏ß‡∏±‡∏ô‡πÄ‡∏ß‡∏•‡∏≤ 09:00 ‡∏ô. (‡πÄ‡∏ß‡∏•‡∏≤‡πÑ‡∏ó‡∏¢)
- **‡∏´‡∏ô‡πâ‡∏≤‡∏ó‡∏µ‡πà:**
  - ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏Ñ‡∏≥‡∏Ç‡∏≠‡∏¢‡∏∑‡∏°‡∏ó‡∏µ‡πà‡∏Ñ‡∏£‡∏ö‡∏Å‡∏≥‡∏´‡∏ô‡∏î‡∏Ñ‡∏∑‡∏ô‡∏†‡∏≤‡∏¢‡πÉ‡∏ô 1 ‡∏ß‡∏±‡∏ô
  - ‡∏™‡πà‡∏á‡∏Å‡∏≤‡∏£‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô‡∏•‡πà‡∏ß‡∏á‡∏´‡∏ô‡πâ‡∏≤ (priority: high)
  - ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ß‡πà‡∏≤‡∏™‡πà‡∏á‡∏Å‡∏≤‡∏£‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô‡πÑ‡∏õ‡πÅ‡∏•‡πâ‡∏ß‡∏´‡∏£‡∏∑‡∏≠‡∏¢‡∏±‡∏á (‡πÑ‡∏°‡πà‡∏™‡πà‡∏á‡∏ã‡πâ‡∏≥‡πÉ‡∏ô‡∏ß‡∏±‡∏ô‡πÄ‡∏î‡∏µ‡∏¢‡∏ß‡∏Å‡∏±‡∏ô)
- **‡∏ú‡∏•‡∏•‡∏±‡∏û‡∏ò‡πå:**
  ```javascript
  {
    success: true,
    remindersSent: 8,
    timestamp: "2024-01-15T09:00:00.000Z"
  }
  ```

##### 1.3 `cancelExpiredReservations`
- **Schedule:** ‡∏ó‡∏∏‡∏Å 2 ‡∏ä‡∏±‡πà‡∏ß‡πÇ‡∏°‡∏á
- **‡∏´‡∏ô‡πâ‡∏≤‡∏ó‡∏µ‡πà:**
  - ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏Å‡∏≤‡∏£‡∏à‡∏≠‡∏á‡∏ó‡∏µ‡πà‡∏ú‡πà‡∏≤‡∏ô‡πÄ‡∏ß‡∏•‡∏≤‡∏ô‡∏±‡∏î‡∏´‡∏°‡∏≤‡∏¢‡∏°‡∏≤‡∏Å‡∏Å‡∏ß‡πà‡∏≤ 2 ‡∏ä‡∏±‡πà‡∏ß‡πÇ‡∏°‡∏á (status = 'ready')
  - ‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡∏Å‡∏≤‡∏£‡∏à‡∏≠‡∏á‡πÄ‡∏õ‡πá‡∏ô 'expired'
  - ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡∏≠‡∏∏‡∏õ‡∏Å‡∏£‡∏ì‡πå‡∏Å‡∏•‡∏±‡∏ö‡πÄ‡∏õ‡πá‡∏ô 'available'
  - ‡∏™‡πà‡∏á‡∏Å‡∏≤‡∏£‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô‡πÑ‡∏õ‡∏¢‡∏±‡∏á‡∏ú‡∏π‡πâ‡∏à‡∏≠‡∏á
  - ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å activity log
- **‡∏ú‡∏•‡∏•‡∏±‡∏û‡∏ò‡πå:**
  ```javascript
  {
    success: true,
    cancelledCount: 3,
    timestamp: "2024-01-15T10:00:00.000Z"
  }
  ```

**‡∏Å‡∏≤‡∏£‡∏ï‡∏¥‡∏î‡∏ï‡∏±‡πâ‡∏á:**
```bash
# ‡∏ï‡∏¥‡∏î‡∏ï‡∏±‡πâ‡∏á dependencies
cd functions
npm install firebase-functions firebase-admin

# Deploy functions
firebase deploy --only functions:checkOverdueLoans
firebase deploy --only functions:sendLoanReminders
firebase deploy --only functions:cancelExpiredReservations
```

---

### 2. Services

#### `src/services/overdueManagementService.js`
Service ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏Ñ‡∏≥‡∏Ç‡∏≠‡∏ó‡∏µ‡πà‡∏´‡∏°‡∏î‡∏≠‡∏≤‡∏¢‡∏∏‡∏ù‡∏±‡πà‡∏á client

**‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏´‡∏•‡∏±‡∏Å:**

##### 2.1 ‡∏Å‡∏≤‡∏£‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞
```javascript
// ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ß‡πà‡∏≤‡∏Ñ‡∏≥‡∏Ç‡∏≠‡πÄ‡∏Å‡∏¥‡∏ô‡∏Å‡∏≥‡∏´‡∏ô‡∏î‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà
OverdueManagementService.isOverdue(loanRequest)
// Returns: boolean

// ‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡πÄ‡∏Å‡∏¥‡∏ô‡∏Å‡∏≥‡∏´‡∏ô‡∏î
OverdueManagementService.calculateDaysOverdue(expectedReturnDate)
// Returns: number (0 if not overdue)

// ‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡πÄ‡∏´‡∏•‡∏∑‡∏≠‡∏à‡∏ô‡∏Ñ‡∏£‡∏ö‡∏Å‡∏≥‡∏´‡∏ô‡∏î
OverdueManagementService.calculateDaysUntilDue(expectedReturnDate)
// Returns: number (negative if overdue)
```

##### 2.2 ‡∏Å‡∏≤‡∏£‡∏î‡∏∂‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•
```javascript
// ‡∏î‡∏∂‡∏á‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏Ñ‡∏≥‡∏Ç‡∏≠‡∏ó‡∏µ‡πà‡πÄ‡∏Å‡∏¥‡∏ô‡∏Å‡∏≥‡∏´‡∏ô‡∏î‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î
await OverdueManagementService.getOverdueLoanRequests(userId)
// Returns: Array<LoanRequest>

// ‡∏î‡∏∂‡∏á‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏Ñ‡∏≥‡∏Ç‡∏≠‡∏ó‡∏µ‡πà‡πÉ‡∏Å‡∏•‡πâ‡∏Ñ‡∏£‡∏ö‡∏Å‡∏≥‡∏´‡∏ô‡∏î (default: 3 ‡∏ß‡∏±‡∏ô)
await OverdueManagementService.getLoanRequestsDueSoon(daysAhead, userId)
// Returns: Array<LoanRequest>

// ‡∏î‡∏∂‡∏á‡∏™‡∏ñ‡∏¥‡∏ï‡∏¥‡∏Ñ‡∏≥‡∏Ç‡∏≠‡∏ó‡∏µ‡πà‡πÄ‡∏Å‡∏¥‡∏ô‡∏Å‡∏≥‡∏´‡∏ô‡∏î
await OverdueManagementService.getOverdueStatistics(userId)
// Returns: {
//   totalOverdue: number,
//   totalDueSoon: number,
//   averageDaysOverdue: number,
//   maxDaysOverdue: number,
//   overdueLoanRequests: Array<LoanRequest>,
//   dueSoonLoanRequests: Array<LoanRequest>
// }
```

##### 2.3 ‡∏Å‡∏≤‡∏£‡πÅ‡∏™‡∏î‡∏á‡∏ú‡∏•
```javascript
// ‡∏î‡∏∂‡∏á label ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡πÅ‡∏™‡∏î‡∏á‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞
OverdueManagementService.getOverdueStatusLabel(loanRequest)
// Returns: "‡πÄ‡∏Å‡∏¥‡∏ô‡∏Å‡∏≥‡∏´‡∏ô‡∏î 5 ‡∏ß‡∏±‡∏ô"

OverdueManagementService.getDueSoonLabel(loanRequest)
// Returns: "‡∏Ñ‡∏£‡∏ö‡∏Å‡∏≥‡∏´‡∏ô‡∏î‡∏û‡∏£‡∏∏‡πà‡∏á‡∏ô‡∏µ‡πâ" | "‡πÄ‡∏´‡∏•‡∏∑‡∏≠‡∏≠‡∏µ‡∏Å 2 ‡∏ß‡∏±‡∏ô"

// ‡∏î‡∏∂‡∏á CSS class ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏™‡∏µ
OverdueManagementService.getOverdueColorClass(daysOverdue)
// Returns: "text-red-600" | "text-orange-600" | etc.

OverdueManagementService.getOverdueBadgeClass(daysOverdue)
// Returns: "bg-red-100 text-red-800" | etc.

// ‡∏ü‡∏≠‡∏£‡πå‡πÅ‡∏°‡∏ï‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà
OverdueManagementService.formatOverdueDate(expectedReturnDate)
// Returns: "15 ‡∏°‡∏Å‡∏£‡∏≤‡∏Ñ‡∏° 2567"
```

##### 2.4 ‡∏Å‡∏≤‡∏£‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£ (Fallback)
```javascript
// ‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡πÄ‡∏õ‡πá‡∏ô overdue (client-side fallback)
await OverdueManagementService.markAsOverdue(loanRequestId)
// Returns: boolean

// ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ß‡πà‡∏≤‡∏Å‡∏≤‡∏£‡∏à‡∏≠‡∏á‡∏´‡∏°‡∏î‡∏≠‡∏≤‡∏¢‡∏∏‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà
OverdueManagementService.isReservationExpired(reservation)
// Returns: boolean
```

---

### 3. Components

#### `src/components/loan/OverdueIndicator.js`
Component ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡πÅ‡∏™‡∏î‡∏á‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡πÄ‡∏Å‡∏¥‡∏ô‡∏Å‡∏≥‡∏´‡∏ô‡∏î

**Props:**
```typescript
{
  loanRequest: Object,        // ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏Ñ‡∏≥‡∏Ç‡∏≠‡∏¢‡∏∑‡∏° (required)
  showIcon: boolean,          // ‡πÅ‡∏™‡∏î‡∏á‡πÑ‡∏≠‡∏Ñ‡∏≠‡∏ô‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà (default: true)
  showDueSoon: boolean,       // ‡πÅ‡∏™‡∏î‡∏á "‡πÉ‡∏Å‡∏•‡πâ‡∏Ñ‡∏£‡∏ö‡∏Å‡∏≥‡∏´‡∏ô‡∏î" ‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà (default: true)
  variant: 'badge'|'text'|'full'  // ‡∏£‡∏π‡∏õ‡πÅ‡∏ö‡∏ö‡∏Å‡∏≤‡∏£‡πÅ‡∏™‡∏î‡∏á‡∏ú‡∏• (default: 'badge')
}
```

**Variants:**

##### 3.1 Badge (default)
```jsx
<OverdueIndicator loanRequest={loan} variant="badge" />
```
‡πÅ‡∏™‡∏î‡∏á‡πÄ‡∏õ‡πá‡∏ô badge ‡∏™‡∏µ‡πÅ‡∏î‡∏á/‡∏™‡πâ‡∏°/‡πÄ‡∏´‡∏•‡∏∑‡∏≠‡∏á ‡∏û‡∏£‡πâ‡∏≠‡∏°‡πÑ‡∏≠‡∏Ñ‡∏≠‡∏ô

##### 3.2 Text
```jsx
<OverdueIndicator loanRequest={loan} variant="text" />
```
‡πÅ‡∏™‡∏î‡∏á‡πÄ‡∏õ‡πá‡∏ô‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ò‡∏£‡∏£‡∏°‡∏î‡∏≤ ‡∏û‡∏£‡πâ‡∏≠‡∏°‡∏™‡∏µ

##### 3.3 Full
```jsx
<OverdueIndicator loanRequest={loan} variant="full" />
```
‡πÅ‡∏™‡∏î‡∏á‡πÄ‡∏õ‡πá‡∏ô card ‡∏û‡∏£‡πâ‡∏≠‡∏°‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î‡πÄ‡∏ï‡πá‡∏°

**‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏Å‡∏≤‡∏£‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô:**
```jsx
// ‡πÉ‡∏ô LoanRequestCard
<div className="flex items-center space-x-2">
  <LoanStatusBadge status={request.status} />
  <OverdueIndicator 
    loanRequest={request} 
    variant="badge"
    showIcon={true}
    showDueSoon={true}
  />
</div>

// ‡πÉ‡∏ô LoanRequestDetail
<OverdueIndicator 
  loanRequest={request} 
  variant="full"
/>
```

---

#### `src/components/admin/OverdueDashboard.js`
Dashboard ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö admin ‡∏ï‡∏¥‡∏î‡∏ï‡∏≤‡∏°‡∏Ñ‡∏≥‡∏Ç‡∏≠‡∏ó‡∏µ‡πà‡πÄ‡∏Å‡∏¥‡∏ô‡∏Å‡∏≥‡∏´‡∏ô‡∏î

**Features:**
1. **Statistics Cards**
   - ‡πÄ‡∏Å‡∏¥‡∏ô‡∏Å‡∏≥‡∏´‡∏ô‡∏î‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î (Total Overdue)
   - ‡πÉ‡∏Å‡∏•‡πâ‡∏Ñ‡∏£‡∏ö‡∏Å‡∏≥‡∏´‡∏ô‡∏î (Due Soon)
   - ‡πÄ‡∏â‡∏•‡∏µ‡πà‡∏¢‡πÄ‡∏Å‡∏¥‡∏ô‡∏Å‡∏≥‡∏´‡∏ô‡∏î (Average Days Overdue)
   - ‡πÄ‡∏Å‡∏¥‡∏ô‡∏Å‡∏≥‡∏´‡∏ô‡∏î‡∏™‡∏π‡∏á‡∏™‡∏∏‡∏î (Max Days Overdue)

2. **Overdue Loans List**
   - ‡πÅ‡∏™‡∏î‡∏á 5 ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡πÅ‡∏£‡∏Å‡∏ó‡∏µ‡πà‡πÄ‡∏Å‡∏¥‡∏ô‡∏Å‡∏≥‡∏´‡∏ô‡∏î‡∏°‡∏≤‡∏Å‡∏ó‡∏µ‡πà‡∏™‡∏∏‡∏î
   - ‡πÅ‡∏™‡∏î‡∏á‡∏ä‡∏∑‡πà‡∏≠‡∏ú‡∏π‡πâ‡∏¢‡∏∑‡∏°, ‡∏≠‡∏∏‡∏õ‡∏Å‡∏£‡∏ì‡πå, ‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡∏Å‡∏≥‡∏´‡∏ô‡∏î‡∏Ñ‡∏∑‡∏ô
   - ‡πÅ‡∏™‡∏î‡∏á badge ‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡πÄ‡∏Å‡∏¥‡∏ô
   - ‡∏•‡∏¥‡∏á‡∏Å‡πå‡πÑ‡∏õ‡∏¢‡∏±‡∏á‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î

3. **Due Soon List**
   - ‡πÅ‡∏™‡∏î‡∏á 5 ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡πÅ‡∏£‡∏Å‡∏ó‡∏µ‡πà‡πÉ‡∏Å‡∏•‡πâ‡∏Ñ‡∏£‡∏ö‡∏Å‡∏≥‡∏´‡∏ô‡∏î
   - ‡πÅ‡∏™‡∏î‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÄ‡∏ä‡πà‡∏ô‡πÄ‡∏î‡∏µ‡∏¢‡∏ß‡∏Å‡∏±‡∏ö Overdue List

4. **Auto Refresh**
   - ‡∏õ‡∏∏‡πà‡∏° Refresh ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡πÇ‡∏´‡∏•‡∏î‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÉ‡∏´‡∏°‡πà
   - Loading state ‡πÅ‡∏•‡∏∞ Error handling

**‡∏Å‡∏≤‡∏£‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô:**
```jsx
// ‡πÉ‡∏ô AdminDashboard
import OverdueDashboard from './OverdueDashboard';

<OverdueDashboard />
```

---

## üîÑ ‡∏Å‡∏≤‡∏£‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï‡πÑ‡∏ü‡∏•‡πå‡πÄ‡∏î‡∏¥‡∏°

### `src/services/loanRequestService.js`

**‡πÄ‡∏û‡∏¥‡πà‡∏° imports:**
```javascript
import { Timestamp } from 'firebase/firestore';
import OverdueManagementService from './overdueManagementService';
```

**‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡πÉ‡∏´‡∏°‡πà:**

#### 1. `checkAndUpdateOverdueLoans()`
Client-side fallback ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡πÅ‡∏•‡∏∞‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï‡∏Ñ‡∏≥‡∏Ç‡∏≠‡∏ó‡∏µ‡πà‡πÄ‡∏Å‡∏¥‡∏ô‡∏Å‡∏≥‡∏´‡∏ô‡∏î
```javascript
static async checkAndUpdateOverdueLoans() {
  // Query borrowed loans past expected return date
  // Update status to 'overdue'
  // Returns: number of loans marked as overdue
}
```

#### 2. `getOverdueLoanRequests(userId)`
Wrapper ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö OverdueManagementService
```javascript
static async getOverdueLoanRequests(userId = null) {
  return await OverdueManagementService.getOverdueLoanRequests(userId);
}
```

#### 3. `getLoanRequestsDueSoon(daysAhead, userId)`
Wrapper ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö OverdueManagementService
```javascript
static async getLoanRequestsDueSoon(daysAhead = 3, userId = null) {
  return await OverdueManagementService.getLoanRequestsDueSoon(daysAhead, userId);
}
```

#### 4. `getOverdueStatistics(userId)`
Wrapper ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö OverdueManagementService
```javascript
static async getOverdueStatistics(userId = null) {
  return await OverdueManagementService.getOverdueStatistics(userId);
}
```

#### 5. `isOverdue(loanRequest)`
Wrapper ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö OverdueManagementService
```javascript
static isOverdue(loanRequest) {
  return OverdueManagementService.isOverdue(loanRequest);
}
```

#### 6. `calculateDaysOverdue(expectedReturnDate)`
Wrapper ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö OverdueManagementService
```javascript
static calculateDaysOverdue(expectedReturnDate) {
  return OverdueManagementService.calculateDaysOverdue(expectedReturnDate);
}
```

---

## üìä Data Flow

### 1. Overdue Detection Flow
```
Cloud Function (hourly)
  ‚Üì
Query borrowed loans (expectedReturnDate < now)
  ‚Üì
Update status to 'overdue'
  ‚Üì
Create notifications (user + admins)
  ‚Üì
Log activity
```

### 2. Reminder Flow
```
Cloud Function (daily 9 AM)
  ‚Üì
Query borrowed loans (due within 1 day)
  ‚Üì
Check if reminder already sent today
  ‚Üì
Create reminder notification
```

### 3. Client-side Display Flow
```
Component loads
  ‚Üì
Call OverdueManagementService.getOverdueStatistics()
  ‚Üì
Query Firestore for overdue/due soon loans
  ‚Üì
Calculate statistics
  ‚Üì
Display in UI
```

---

## üé® UI/UX Improvements

### Color Coding
- **0 ‡∏ß‡∏±‡∏ô (‡∏õ‡∏Å‡∏ï‡∏¥):** Gray
- **1-3 ‡∏ß‡∏±‡∏ô (‡πÄ‡∏£‡∏¥‡πà‡∏°‡πÄ‡∏Å‡∏¥‡∏ô):** Orange
- **4-7 ‡∏ß‡∏±‡∏ô (‡πÄ‡∏Å‡∏¥‡∏ô‡∏°‡∏≤‡∏Å):** Red
- **8+ ‡∏ß‡∏±‡∏ô (‡πÄ‡∏Å‡∏¥‡∏ô‡∏°‡∏≤‡∏Å‡∏°‡∏≤‡∏Å):** Dark Red + Bold

### Badge Styles
```jsx
// Not overdue
<span className="bg-gray-100 text-gray-800">...</span>

// 1-3 days overdue
<span className="bg-orange-100 text-orange-800">...</span>

// 4-7 days overdue
<span className="bg-red-100 text-red-800">...</span>

// 8+ days overdue
<span className="bg-red-200 text-red-900 font-bold">...</span>
```

### Icons
- **Overdue:** `ExclamationTriangleIcon` (warning)
- **Due Soon:** `ClockIcon` (time)
- **Statistics:** `ChartBarIcon`
- **User:** `UserIcon`

---

## üîî Notification Types

### 1. Loan Overdue (‡∏ú‡∏π‡πâ‡∏¢‡∏∑‡∏°)
```javascript
{
  type: 'loan_overdue',
  title: '‡∏Å‡∏≤‡∏£‡∏¢‡∏∑‡∏°‡∏≠‡∏∏‡∏õ‡∏Å‡∏£‡∏ì‡πå‡πÄ‡∏Å‡∏¥‡∏ô‡∏Å‡∏≥‡∏´‡∏ô‡∏î',
  message: '‡∏Ñ‡∏∏‡∏ì‡∏¢‡∏∑‡∏°‡∏≠‡∏∏‡∏õ‡∏Å‡∏£‡∏ì‡πå‡πÄ‡∏Å‡∏¥‡∏ô‡∏Å‡∏≥‡∏´‡∏ô‡∏î‡∏Ñ‡∏∑‡∏ô‡πÅ‡∏•‡πâ‡∏ß ‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏Ñ‡∏∑‡∏ô‡∏≠‡∏∏‡∏õ‡∏Å‡∏£‡∏ì‡πå‡πÇ‡∏î‡∏¢‡πÄ‡∏£‡πá‡∏ß‡∏ó‡∏µ‡πà‡∏™‡∏∏‡∏î',
  priority: 'high',
  actionUrl: '/my-loans/{loanId}',
  actionText: '‡∏î‡∏π‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î'
}
```

### 2. Loan Overdue Admin (‡∏ú‡∏π‡πâ‡∏î‡∏π‡πÅ‡∏•‡∏£‡∏∞‡∏ö‡∏ö)
```javascript
{
  type: 'loan_overdue_admin',
  title: '‡∏°‡∏µ‡∏Å‡∏≤‡∏£‡∏¢‡∏∑‡∏°‡∏≠‡∏∏‡∏õ‡∏Å‡∏£‡∏ì‡πå‡πÄ‡∏Å‡∏¥‡∏ô‡∏Å‡∏≥‡∏´‡∏ô‡∏î',
  message: '‡∏°‡∏µ‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡∏¢‡∏∑‡∏°‡∏≠‡∏∏‡∏õ‡∏Å‡∏£‡∏ì‡πå‡πÄ‡∏Å‡∏¥‡∏ô‡∏Å‡∏≥‡∏´‡∏ô‡∏î‡∏Ñ‡∏∑‡∏ô',
  priority: 'medium',
  actionUrl: '/admin/loan-requests/{loanId}',
  actionText: '‡∏î‡∏π‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î'
}
```

### 3. Loan Reminder (‡∏ú‡∏π‡πâ‡∏¢‡∏∑‡∏°)
```javascript
{
  type: 'loan_reminder',
  title: '‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô‡∏Ñ‡∏∑‡∏ô‡∏≠‡∏∏‡∏õ‡∏Å‡∏£‡∏ì‡πå',
  message: '‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏Ñ‡∏∑‡∏ô‡∏≠‡∏∏‡∏õ‡∏Å‡∏£‡∏ì‡πå‡∏†‡∏≤‡∏¢‡πÉ‡∏ô‡∏ß‡∏±‡∏ô‡∏û‡∏£‡∏∏‡πà‡∏á‡∏ô‡∏µ‡πâ',
  priority: 'high',
  actionUrl: '/my-loans/{loanId}',
  actionText: '‡∏î‡∏π‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î'
}
```

### 4. Reservation Expired (‡∏ú‡∏π‡πâ‡∏à‡∏≠‡∏á)
```javascript
{
  type: 'reservation_expired',
  title: '‡∏Å‡∏≤‡∏£‡∏à‡∏≠‡∏á‡∏´‡∏°‡∏î‡∏≠‡∏≤‡∏¢‡∏∏',
  message: '‡∏Å‡∏≤‡∏£‡∏à‡∏≠‡∏á‡∏≠‡∏∏‡∏õ‡∏Å‡∏£‡∏ì‡πå‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì‡∏´‡∏°‡∏î‡∏≠‡∏≤‡∏¢‡∏∏‡πÅ‡∏•‡πâ‡∏ß ‡πÄ‡∏ô‡∏∑‡πà‡∏≠‡∏á‡∏à‡∏≤‡∏Å‡πÑ‡∏°‡πà‡∏°‡∏≤‡∏£‡∏±‡∏ö‡∏†‡∏≤‡∏¢‡πÉ‡∏ô‡πÄ‡∏ß‡∏•‡∏≤‡∏ó‡∏µ‡πà‡∏Å‡∏≥‡∏´‡∏ô‡∏î',
  priority: 'medium'
}
```

---

## üß™ Testing

### Manual Testing Checklist

#### Cloud Functions
- [ ] Deploy functions ‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à
- [ ] `checkOverdueLoans` ‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡∏ó‡∏∏‡∏Å 1 ‡∏ä‡∏±‡πà‡∏ß‡πÇ‡∏°‡∏á
- [ ] `sendLoanReminders` ‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡∏ó‡∏∏‡∏Å‡∏ß‡∏±‡∏ô‡πÄ‡∏ß‡∏•‡∏≤ 9 ‡πÇ‡∏°‡∏á‡πÄ‡∏ä‡πâ‡∏≤
- [ ] `cancelExpiredReservations` ‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡∏ó‡∏∏‡∏Å 2 ‡∏ä‡∏±‡πà‡∏ß‡πÇ‡∏°‡∏á
- [ ] Notifications ‡∏ñ‡∏π‡∏Å‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á
- [ ] Activity logs ‡∏ñ‡∏π‡∏Å‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å

#### Services
- [ ] `OverdueManagementService.isOverdue()` ‡∏Ñ‡∏∑‡∏ô‡∏Ñ‡πà‡∏≤‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á
- [ ] `calculateDaysOverdue()` ‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á
- [ ] `getOverdueLoanRequests()` ‡∏î‡∏∂‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á
- [ ] `getOverdueStatistics()` ‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏™‡∏ñ‡∏¥‡∏ï‡∏¥‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á

#### Components
- [ ] `OverdueIndicator` ‡πÅ‡∏™‡∏î‡∏á‡∏ú‡∏•‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á‡∏ó‡∏∏‡∏Å variant
- [ ] Color coding ‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á‡∏ï‡∏≤‡∏°‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏ß‡∏±‡∏ô
- [ ] `OverdueDashboard` ‡πÅ‡∏™‡∏î‡∏á‡∏™‡∏ñ‡∏¥‡∏ï‡∏¥‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á
- [ ] Refresh button ‡∏ó‡∏≥‡∏á‡∏≤‡∏ô
- [ ] Loading ‡πÅ‡∏•‡∏∞ Error states ‡πÅ‡∏™‡∏î‡∏á‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á

### Test Scenarios

#### Scenario 1: Loan becomes overdue
1. ‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏Ñ‡∏≥‡∏Ç‡∏≠‡∏¢‡∏∑‡∏°‡∏ó‡∏µ‡πà expectedReturnDate ‡πÄ‡∏õ‡πá‡∏ô‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏ß‡∏≤‡∏ô
2. ‡∏£‡∏≠ Cloud Function ‡∏ó‡∏≥‡∏á‡∏≤‡∏ô (‡∏´‡∏£‡∏∑‡∏≠‡πÄ‡∏£‡∏µ‡∏¢‡∏Å manually)
3. ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ß‡πà‡∏≤‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡πÄ‡∏õ‡πá‡∏ô 'overdue'
4. ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ß‡πà‡∏≤‡∏°‡∏µ notification ‡∏ñ‡∏π‡∏Å‡∏™‡∏£‡πâ‡∏≤‡∏á
5. ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ß‡πà‡∏≤ OverdueIndicator ‡πÅ‡∏™‡∏î‡∏á‡∏ú‡∏•‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á

#### Scenario 2: Loan due soon
1. ‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏Ñ‡∏≥‡∏Ç‡∏≠‡∏¢‡∏∑‡∏°‡∏ó‡∏µ‡πà expectedReturnDate ‡πÄ‡∏õ‡πá‡∏ô‡∏û‡∏£‡∏∏‡πà‡∏á‡∏ô‡∏µ‡πâ
2. ‡∏£‡∏≠ Cloud Function ‡∏ó‡∏≥‡∏á‡∏≤‡∏ô (9 AM)
3. ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ß‡πà‡∏≤‡∏°‡∏µ reminder notification
4. ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ß‡πà‡∏≤ OverdueIndicator ‡πÅ‡∏™‡∏î‡∏á "‡∏Ñ‡∏£‡∏ö‡∏Å‡∏≥‡∏´‡∏ô‡∏î‡∏û‡∏£‡∏∏‡πà‡∏á‡∏ô‡∏µ‡πâ"

#### Scenario 3: Reservation expires
1. ‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏Å‡∏≤‡∏£‡∏à‡∏≠‡∏á‡∏ó‡∏µ‡πà startTime ‡πÄ‡∏õ‡πá‡∏ô 3 ‡∏ä‡∏±‡πà‡∏ß‡πÇ‡∏°‡∏á‡∏ó‡∏µ‡πà‡πÅ‡∏•‡πâ‡∏ß
2. ‡∏£‡∏≠ Cloud Function ‡∏ó‡∏≥‡∏á‡∏≤‡∏ô
3. ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ß‡πà‡∏≤‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡πÄ‡∏õ‡πá‡∏ô 'expired'
4. ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ß‡πà‡∏≤‡∏≠‡∏∏‡∏õ‡∏Å‡∏£‡∏ì‡πå‡∏Å‡∏•‡∏±‡∏ö‡πÄ‡∏õ‡πá‡∏ô 'available'
5. ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ß‡πà‡∏≤‡∏°‡∏µ notification

---

## üìà Performance Considerations

### Query Optimization
- ‡πÉ‡∏ä‡πâ composite indexes ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö query ‡∏ó‡∏µ‡πà‡∏ã‡∏±‡∏ö‡∏ã‡πâ‡∏≠‡∏ô
- Limit ‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏ú‡∏•‡∏•‡∏±‡∏û‡∏ò‡πå (top 5 ‡πÉ‡∏ô dashboard)
- Cache statistics ‡πÉ‡∏ô client

### Firestore Indexes Required
```json
{
  "indexes": [
    {
      "collectionGroup": "loanRequests",
      "queryScope": "COLLECTION",
      "fields": [
        { "fieldPath": "status", "order": "ASCENDING" },
        { "fieldPath": "expectedReturnDate", "order": "ASCENDING" }
      ]
    },
    {
      "collectionGroup": "reservations",
      "queryScope": "COLLECTION",
      "fields": [
        { "fieldPath": "status", "order": "ASCENDING" },
        { "fieldPath": "startTime", "order": "ASCENDING" }
      ]
    }
  ]
}
```

### Batch Operations
- Cloud Functions ‡πÉ‡∏ä‡πâ batch writes ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö atomic updates
- ‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï‡∏´‡∏•‡∏≤‡∏¢‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏û‡∏£‡πâ‡∏≠‡∏°‡∏Å‡∏±‡∏ô
- ‡∏•‡∏î API calls

---

## üöÄ Deployment

### 1. Deploy Cloud Functions
```bash
# ‡∏ï‡∏¥‡∏î‡∏ï‡∏±‡πâ‡∏á dependencies
cd functions
npm install

# Deploy ‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î
firebase deploy --only functions

# ‡∏´‡∏£‡∏∑‡∏≠ deploy ‡∏ó‡∏µ‡∏•‡∏∞‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô
firebase deploy --only functions:checkOverdueLoans
firebase deploy --only functions:sendLoanReminders
firebase deploy --only functions:cancelExpiredReservations
```

### 2. Update Firestore Indexes
```bash
firebase deploy --only firestore:indexes
```

### 3. Deploy Frontend
```bash
# Build
npm run build

# Deploy
firebase deploy --only hosting
```

---

## üìù Configuration

### Environment Variables
‡πÑ‡∏°‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£ environment variables ‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏ï‡∏¥‡∏° (‡πÉ‡∏ä‡πâ Firebase config ‡∏ó‡∏µ‡πà‡∏°‡∏µ‡∏≠‡∏¢‡∏π‡πà)

### Firebase Console Settings
1. ‡πÄ‡∏õ‡∏¥‡∏î‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô Cloud Scheduler
2. ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤ timezone ‡πÄ‡∏õ‡πá‡∏ô 'Asia/Bangkok'
3. ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö billing account (Cloud Functions ‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£ Blaze plan)

---

## üîç Monitoring

### Cloud Functions Logs
```bash
# ‡∏î‡∏π logs ‡∏Ç‡∏≠‡∏á checkOverdueLoans
firebase functions:log --only checkOverdueLoans

# ‡∏î‡∏π logs ‡∏Ç‡∏≠‡∏á sendLoanReminders
firebase functions:log --only sendLoanReminders

# ‡∏î‡∏π logs ‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î
firebase functions:log
```

### Metrics to Monitor
- ‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏Ñ‡∏≥‡∏Ç‡∏≠‡∏ó‡∏µ‡πà‡πÄ‡∏Å‡∏¥‡∏ô‡∏Å‡∏≥‡∏´‡∏ô‡∏î‡∏ï‡πà‡∏≠‡∏ß‡∏±‡∏ô
- ‡∏à‡∏≥‡∏ô‡∏ß‡∏ô notifications ‡∏ó‡∏µ‡πà‡∏™‡πà‡∏á‡∏ï‡πà‡∏≠‡∏ß‡∏±‡∏ô
- ‡πÄ‡∏ß‡∏•‡∏≤‡πÄ‡∏â‡∏•‡∏µ‡πà‡∏¢‡∏ó‡∏µ‡πà‡πÄ‡∏Å‡∏¥‡∏ô‡∏Å‡∏≥‡∏´‡∏ô‡∏î
- ‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏Å‡∏≤‡∏£‡∏à‡∏≠‡∏á‡∏ó‡∏µ‡πà‡∏´‡∏°‡∏î‡∏≠‡∏≤‡∏¢‡∏∏

---

## üêõ Troubleshooting

### Cloud Function ‡πÑ‡∏°‡πà‡∏ó‡∏≥‡∏á‡∏≤‡∏ô
1. ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö logs: `firebase functions:log`
2. ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö Cloud Scheduler ‡πÉ‡∏ô Firebase Console
3. ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö billing account
4. ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö timezone settings

### Notifications ‡πÑ‡∏°‡πà‡∏ñ‡∏π‡∏Å‡∏™‡πà‡∏á
1. ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ß‡πà‡∏≤ Cloud Function ‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à
2. ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö Firestore rules ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö notifications collection
3. ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö NotificationService

### OverdueIndicator ‡πÑ‡∏°‡πà‡πÅ‡∏™‡∏î‡∏á‡∏ú‡∏•
1. ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ß‡πà‡∏≤ loanRequest ‡∏°‡∏µ expectedReturnDate
2. ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ß‡πà‡∏≤ status ‡πÄ‡∏õ‡πá‡∏ô 'borrowed' ‡∏´‡∏£‡∏∑‡∏≠ 'overdue'
3. ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö console ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö errors

---

## ‚úÖ ‡∏™‡∏£‡∏∏‡∏õ

### ‡∏™‡∏¥‡πà‡∏á‡∏ó‡∏µ‡πà‡πÑ‡∏î‡πâ‡∏£‡∏±‡∏ö‡∏Å‡∏≤‡∏£‡∏õ‡∏£‡∏±‡∏ö‡∏õ‡∏£‡∏∏‡∏á
1. ‚úÖ ‡∏£‡∏∞‡∏ö‡∏ö‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏Ñ‡∏≥‡∏Ç‡∏≠‡∏ó‡∏µ‡πà‡πÄ‡∏Å‡∏¥‡∏ô‡∏Å‡∏≥‡∏´‡∏ô‡∏î‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥ (Cloud Function)
2. ‚úÖ ‡∏£‡∏∞‡∏ö‡∏ö‡∏™‡πà‡∏á‡∏Å‡∏≤‡∏£‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô‡∏•‡πà‡∏ß‡∏á‡∏´‡∏ô‡πâ‡∏≤ (Cloud Function)
3. ‚úÖ ‡∏£‡∏∞‡∏ö‡∏ö‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏Å‡∏≤‡∏£‡∏à‡∏≠‡∏á‡∏ó‡∏µ‡πà‡∏´‡∏°‡∏î‡∏≠‡∏≤‡∏¢‡∏∏ (Cloud Function)
4. ‚úÖ Service ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£ overdue ‡∏ù‡∏±‡πà‡∏á client
5. ‚úÖ Component ‡πÅ‡∏™‡∏î‡∏á‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞ overdue
6. ‚úÖ Dashboard ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö admin ‡∏ï‡∏¥‡∏î‡∏ï‡∏≤‡∏° overdue
7. ‚úÖ Integration ‡∏Å‡∏±‡∏ö loanRequestService

### ‡∏õ‡∏£‡∏∞‡πÇ‡∏¢‡∏ä‡∏ô‡πå‡∏ó‡∏µ‡πà‡πÑ‡∏î‡πâ‡∏£‡∏±‡∏ö
- ‚úÖ ‡∏•‡∏î‡∏†‡∏≤‡∏£‡∏∞‡∏á‡∏≤‡∏ô‡∏Ç‡∏≠‡∏á admin ‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏Ñ‡∏≥‡∏Ç‡∏≠‡∏ó‡∏µ‡πà‡πÄ‡∏Å‡∏¥‡∏ô‡∏Å‡∏≥‡∏´‡∏ô‡∏î
- ‚úÖ ‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡πÑ‡∏î‡πâ‡∏£‡∏±‡∏ö‡∏Å‡∏≤‡∏£‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥
- ‚úÖ ‡∏™‡∏ñ‡∏¥‡∏ï‡∏¥‡πÅ‡∏•‡∏∞‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô‡∏ó‡∏µ‡πà‡∏ä‡∏±‡∏î‡πÄ‡∏à‡∏ô
- ‚úÖ ‡∏õ‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô‡∏Å‡∏≤‡∏£‡∏à‡∏≠‡∏á‡∏ó‡∏µ‡πà‡πÑ‡∏°‡πà‡∏°‡∏≤‡∏£‡∏±‡∏ö
- ‚úÖ ‡∏õ‡∏£‡∏±‡∏ö‡∏õ‡∏£‡∏∏‡∏á UX ‡∏î‡πâ‡∏ß‡∏¢ visual indicators

### Next Steps
1. ‡∏ó‡∏î‡∏™‡∏≠‡∏ö Cloud Functions ‡πÉ‡∏ô production
2. ‡∏ï‡∏¥‡∏î‡∏ï‡∏≤‡∏° metrics ‡πÅ‡∏•‡∏∞‡∏õ‡∏£‡∏±‡∏ö‡∏õ‡∏£‡∏∏‡∏á
3. ‡πÄ‡∏û‡∏¥‡πà‡∏° email notifications (optional)
4. ‡πÄ‡∏û‡∏¥‡πà‡∏° SMS notifications (optional)
5. ‡∏™‡∏£‡πâ‡∏≤‡∏á admin report ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö overdue trends

---

**‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏´‡∏ï‡∏∏:** ‡∏£‡∏∞‡∏ö‡∏ö‡∏ô‡∏µ‡πâ‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£ Firebase Blaze plan ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô Cloud Functions ‡πÅ‡∏•‡∏∞ Cloud Scheduler
